!function(e,t,r,n,i){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof l.parcelRequire&&l.parcelRequire,o="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function a(r,n){if(!t[r]){if(!e[r]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(r,!0);if(s)return s(r,!0);if(o&&"string"==typeof r)return o(r);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}u.resolve=function(t){return e[r][1][t]||t},u.cache={};var c=t[r]=new a.Module(r);e[r][0].call(c.exports,u,c,c.exports,this)}return t[r].exports;function u(e){return a(u.resolve(e))}}a.isParcelRequire=!0,a.Module=function(e){this.id=e,this.bundle=a,this.exports={}},a.modules=e,a.cache=t,a.parent=s,a.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},l.parcelRequire=a;for(var c=0;c<r.length;c++)a(r[c])}({"4FDvA":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserProfileEditor=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(e("react"));e("./style.less");var i=e("../lib/fileUploader"),l=e("../lib/roundButton"),s=p(e("../lib/roundLink")),o=p(e("../../controller/lib/localization/localizer")),a=p(e("../../controller/lib/regexHelper")),c=p(e("../../controller/lib/msisdnHelper")),u=e("../../controller/lib/validators"),f=p(e("../../config"));function p(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}class h extends n.Component{_fileUploader=void 0;_chosenFile=void 0;constructor(e){super(e),this.state={profile:this.props.profile,clickEnabled:!1}}componentDidMount(){this.refresh()}render(){return n.createElement("div",{className:"center",id:"registerPage"},n.createElement("div",{className:"formTitle textAlignLeft"},this.props.title),n.createElement("div",{id:"inputBox"},n.createElement("input",{className:"input",type:"text",value:this.state.profile.fullName,placeholder:o.default.text("register.fullName"),onChange:this.onFullNameChange}),n.createElement("input",{className:"input",type:"text",value:this.state.profile.userName,placeholder:o.default.text("register.userName"),onChange:this.onUserNameChange}),n.createElement("input",{className:"input",type:"password",value:this.state.profile.password,placeholder:o.default.text("register.password"),onChange:this.onPasswordChange}),n.createElement("input",{className:"input",type:"tel",value:this.state.profile.phone,placeholder:o.default.text("register.phonePlaceHolder"),onChange:this.onPhoneChange,pattern:"[0-9]*"}),this.renderImageView(),n.createElement("div",{id:"photoRow"},n.createElement(l.RoundBtn,{id:"chooseBtn",disabled:!1,text:o.default.text("register.choose"),onClick:this.onChooseClicked})),n.createElement(i.FileUploader,{onFilesChosen:this.onFilesChosen,ref:e=>this._fileUploader=e}),n.createElement("div",{id:"registerDiv"},this.renderCancelBtn(),n.createElement(l.RoundBtn,{disabled:!this.state.clickEnabled,onClick:this.onClickTapped,text:this.props.saveTxt}))))}renderCancelBtn=()=>this.props.cancelUrl?n.createElement(s.default,{id:"backBtn",disabled:!1,text:o.default.text("common.back"),to:this.props.cancelUrl}):null;renderImageView=()=>{if(!(0,u.isStringValid)(this.state.profile.filename))return null;const e=this._chosenFile?URL.createObjectURL(this._chosenFile):`${f.default.baseURL}/${this.state.profile.filename}`;return n.createElement("div",{id:"photoDiv",className:"center"},n.createElement("br",null),n.createElement("img",{src:e,onClick:this.onChooseClicked,id:"photoViewer"}))};onChooseClicked=()=>{this._fileUploader&&this._fileUploader.open()};onFilesChosen=e=>{if(e.length<1)return;const t=this.state.profile;t.filename=e,this._chosenFile=e[0],this.setState({profile:t},(()=>{this.refresh()}))};onPhoneChange=({target:e})=>{const t=this.state.profile;let r=e.value;if(""===r)return t.phone=r,void this.setState({profile:t},(()=>{this.refresh()}));const n=r.length>1&&"0"===r[0],i=Number.parseInt(r,10);isNaN(i)||(r=n?"0"+i:i,t.phone=r,this.setState({profile:t},(()=>{this.refresh()})))};onPasswordChange=({target:e})=>{const t=this.state.profile;t.password=e.value,this.setState({profile:t},(()=>{this.refresh()}))};onFullNameChange=async({target:e})=>{const t=this.state.profile;t.fullName=e.value,this.setState({profile:t},(()=>{this.refresh()}))};onUserNameChange=({target:e})=>{let t=e.value;if(t.length>0&&!a.default.IsUserName(t))return;t=t.toLowerCase();const r=this.state.profile;r.userName=t,this.setState({profile:r},(()=>{this.refresh()}))};onClickTapped=async()=>{if(!this.state.clickEnabled)return;const e={...this.state.profile};e.phone=c.default.transformToFullNumber(e.phone),this.props.onOkTapped(e)};refresh(){const e=c.default.validateMsisdn(this.state.profile.phone),t=this.state.profile.userName.length>0&&this.state.profile.fullName.length>0&&e&&this.state.profile.password.length>6&&!!this.state.profile.filename;this.setState({clickEnabled:t})}}r.UserProfileEditor=h},{react:"28kAn","./style.less":"Pashd","../lib/fileUploader":"2dHpi","../lib/roundButton":"29Imb","../lib/roundLink":"2p0vh","../../controller/lib/localization/localizer":"2Lq0B","../../controller/lib/regexHelper":"2KEip","../../controller/lib/msisdnHelper":"75YGc","../../controller/lib/validators":"70nmJ","../../config":"14DIO"}],Pashd:[function(){},{}],"2dHpi":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FileUploader=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var s=n?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}r.default=e,t&&t.set(e,r);return r}(e("react"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e("./style.less");class l extends n.Component{constructor(e){super(e),this.state={sample:""}}render(){return n.createElement("input",{multiple:!0,type:"file",accept:"image/*",ref:e=>{this._fileInput=e},onChange:this.onFileChosen})}open(){this._fileInput&&this._fileInput.click()}onFileChosen=e=>{const t=e.target.files.length>0?e.target.files:[];t&&this.props.onFilesChosen(t)}}r.FileUploader=l},{react:"28kAn","./style.less":"3DBgA"}],"3DBgA":[function(){},{}],"2KEip":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;class n{static IsUserName(e){return n.latinUserNamePattern.lastIndex=0,n.latinUserNamePattern.test(e)}static latinUserNamePattern=/^([a-z]|[A-Z])(\w*)$/}r.default=n},{}],"75YGc":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;class n{static transformToFullNumber(e){n._ksaPhoneNumberPattern.lastIndex=0;const t=n._ksaPhoneNumberPattern.exec(e);if(t&&8===t.length){return"9665"+t[7]}return""}static validateMsisdn(e){return n._ksaPhoneNumberPattern.lastIndex=0,n._ksaPhoneNumberPattern.test(e)}static _ksaPhoneNumberPattern=/^((\+\+966)?|(00966)?|(966)?|(0)?)(5)(\d{8})$/g}r.default=n},{}],"70nmJ":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validators=r.isNumeric=r.isStringArrayValid=r.isArrayValid=r.isStringValid=r.isDefined=void 0;const n=e=>!!e;r.isDefined=n;const i=e=>!!e&&e.length>0;r.isStringValid=i;const l=e=>!!e&&e.length>0;r.isArrayValid=l;const s=e=>{if(!l(e))return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!i(r))return!1}return!0};r.isStringArrayValid=s;const o=e=>!isNaN(e-parseFloat(e));r.isNumeric=o;const a=[n,i,l,s,o];r.validators=a},{}]},{},[]);