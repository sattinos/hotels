!function(e,t,o,n,i){var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r="function"==typeof l.parcelRequire&&l.parcelRequire,a="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function s(o,n){if(!t[o]){if(!e[o]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(o,!0);if(r)return r(o,!0);if(a&&"string"==typeof o)return a(o);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}c.resolve=function(t){return e[o][1][t]||t},c.cache={};var d=t[o]=new s.Module(o);e[o][0].call(d.exports,c,d,d.exports,this)}return t[o].exports;function c(e){return s(c.resolve(e))}}s.isParcelRequire=!0,s.Module=function(e){this.id=e,this.bundle=s,this.exports={}},s.modules=e,s.cache=t,s.parent=r,s.register=function(t,o){e[t]=[function(e,t){t.exports=o},{}]},l.parcelRequire=s;for(var d=0;d<o.length;d++)s(o[d])}({"2bLXb":[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}o.default=e,t&&t.set(e,o);return o}(e("react"));e("./style.less");var i=f(e("../../controller/lib/localization/localizer")),l=e("../entityCRUD/updateEntity"),r=e("./metaData"),a=f(e("../../controller/appController")),s=e("../entityCRUD/viewAllEntities"),d=e("../lib/roundButton"),c=e("../../model/bedEntity"),u=e("../../controller/network/entityFetcher"),p=e("../../model/roomEntity"),m=e("../shared");function f(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}class h extends n.Component{static getDefaultState=()=>({entity:(0,p.getDefaultRoom)(),metaDataForFiles:[],stage:0,beds:[]});columns=[{Header:"ID",accessor:"id",className:"center",width:40},{Header:"Name",accessor:"name",className:"center"},{Header:"Type",id:"type",accessor:e=>c.bedTypes[e.type],className:"center",width:160}];constructor(e){super(e),this.state=h.getDefaultState(),this._components=[this.roomUpdateView,this.bedIDsSelector]}async componentDidMount(){const e=await u.EntityFetcher.fetch(a.default.roomsFetcher,m.shared.entityID,m.shared.busyFunction);if(e){const t=[];for(let o=0;o<e.bedsIDs.length;o++){const n=e.bedsIDs[o],i=await u.EntityFetcher.fetch(a.default.bedsFetcher,n,m.shared.busyFunction);i&&t.push(i)}this.setState({entity:e,beds:t})}}render(){return this._components[this.state.stage]()}roomUpdateView=()=>{const e=u.EntityFetcher.getValues(this.state.beds,"name");return n.createElement("div",{className:"center form"},n.createElement(l.UpdateEntity,{title:i.default.text("room-update.title"),entityFetcher:a.default.roomsFetcher,metaDataForFiles:this.state.metaDataForFiles,entity:this.state.entity,descriptor:r.roomEntityDescriptor},n.createElement("div",{className:"fullRow"},n.createElement("input",{className:"input center",type:"text",value:e.toString(),readOnly:!0,placeholder:i.default.text("room-choose-beds"),onClick:this.onInputClick}))))};bedIDsSelector=()=>n.createElement("div",{className:"center form"},n.createElement(s.ViewAllEntities,{title:i.default.text("room-choose-beds"),columns:this.columns,entityFetcher:a.default.bedsFetcher,onSelectionChange:this.onSelectionChange}),n.createElement(d.RoundBtn,{disabled:0===this.state.entity.bedsIDs.length,text:i.default.text("common.ok"),onClick:()=>this.onChooseClicked(0)}));onSelectionChange=e=>{const t=this.state.entity,o=u.EntityFetcher.getValues(e,"id");t.bedsIDs=o,this.setState({entity:t,beds:e})};onChooseClicked=e=>{this.setState({stage:e})};onInputClick=e=>{this.onChooseClicked(1)}}o.default=h},{react:"28kAn","./style.less":"6fn6l","../../controller/lib/localization/localizer":"2Lq0B","../entityCRUD/updateEntity":"5MsdB","./metaData":"6R71C","../../controller/appController":"5m3ws","../entityCRUD/viewAllEntities":"7EVn1","../lib/roundButton":"29Imb","../../model/bedEntity":"2sKRw","../../controller/network/entityFetcher":"1aKQt","../../model/roomEntity":"1hyzB","../shared":"5kDOz"}],"6fn6l":[function(){},{}],"6R71C":[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.roomEntityDescriptor=void 0;var n,i=e("../entityCRUD/types"),l=(n=e("../../controller/lib/localization/localizer"))&&n.__esModule?n:{default:n},r=e("../../controller/lib/validators"),a=e("../../model/roomEntity");const s=[{name:"id",label:l.default.text("room.id"),type:i.FieldTypes.inputText,placeholder:l.default.text("bedRoom.id"),className:"input",readOnly:!0},{name:"name",label:l.default.text("room.name"),type:i.FieldTypes.inputText,placeholder:l.default.text("bedRoom.name"),className:"input",isValid:r.isStringValid},{name:"bedsIDs",label:l.default.text("room.beds"),type:i.FieldTypes.custom,placeholder:l.default.text("bedRoom.bedsIds"),className:"input",isValid:r.isArrayValid,readOnly:!0},{name:"description",label:l.default.text("room.description"),type:i.FieldTypes.inputArea,placeholder:l.default.text("bedRoom.description"),className:"input",isValid:r.isStringValid},{name:"type",label:l.default.text("room.type"),type:i.FieldTypes.options,title:"room.type",options:a.roomTypes}];o.roomEntityDescriptor=s},{"../entityCRUD/types":"4N9CI","../../controller/lib/localization/localizer":"2Lq0B","../../controller/lib/validators":"70nmJ","../../model/roomEntity":"1hyzB"}],"1hyzB":[function(e,t,o){"use strict";let n;Object.defineProperty(o,"__esModule",{value:!0}),o.getDefaultRoom=o.roomTypes=o.RoomType=void 0,o.RoomType=n,function(e){e[e.BedRoom=0]="BedRoom",e[e.LivingRoom=1]="LivingRoom",e[e.BathRoom=2]="BathRoom",e[e.Kitchen=3]="Kitchen"}(n||(o.RoomType=n={}));o.roomTypes=["Bed Room","Living Room","Bath Room","Kitchen Room"];o.getDefaultRoom=()=>({name:"",bedsIDs:[],description:"",type:n.BedRoom})},{}],"2sKRw":[function(e,t,o){"use strict";let n;Object.defineProperty(o,"__esModule",{value:!0}),o.getDefaultBed=o.bedTypes=o.BedType=void 0,o.BedType=n,function(e){e[e.Single=0]="Single",e[e.Double=1]="Double",e[e.KingSize=2]="KingSize"}(n||(o.BedType=n={}));o.bedTypes=["Single Bed","Double Bed","KingSize Bed"];o.getDefaultBed=()=>({name:"",filenames:[],type:n.Single,description:""})},{}]},{},[]);