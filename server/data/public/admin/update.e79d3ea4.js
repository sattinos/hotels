!function(e,t,a,i,l){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o="function"==typeof n.parcelRequire&&n.parcelRequire,s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function r(a,i){if(!t[a]){if(!e[a]){var l="function"==typeof parcelRequire&&parcelRequire;if(!i&&l)return l(a,!0);if(o)return o(a,!0);if(s&&"string"==typeof a)return s(a);var n=new Error("Cannot find module '"+a+"'");throw n.code="MODULE_NOT_FOUND",n}d.resolve=function(t){return e[a][1][t]||t},d.cache={};var c=t[a]=new r.Module(a);e[a][0].call(c.exports,d,c,c.exports,this)}return t[a].exports;function d(e){return r(d.resolve(e))}}r.isParcelRequire=!0,r.Module=function(e){this.id=e,this.bundle=r,this.exports={}},r.modules=e,r.cache=t,r.parent=o,r.register=function(t,a){e[t]=[function(e,t){t.exports=a},{}]},n.parcelRequire=r;for(var c=0;c<a.length;c++)r(a[c])}({"3pS6P":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var n=i?Object.getOwnPropertyDescriptor(e,l):null;n&&(n.get||n.set)?Object.defineProperty(a,l,n):a[l]=e[l]}a.default=e,t&&t.set(e,a);return a}(e("react")),l=e("../entityCRUD/updateEntity"),n=m(e("../../controller/lib/localization/localizer")),o=m(e("../../controller/appController")),s=e("./metaData"),r=e("../entityCRUD/viewAllEntities"),c=e("../lib/roundButton"),d=e("../../controller/network/entityFetcher"),u=e("../../model/flatType"),p=e("../shared");function m(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}class h extends i.Component{columns=[{Header:"ID",accessor:"id",className:"center",width:40},{Header:"Name",accessor:"name",className:"center"}];constructor(e){super(e);const t=(0,u.getDefaultFlatType)();this.state={flatType:t,stage:0,bedRooms:[],livingRooms:[],bathRooms:[],kitchens:[],metaDataForFiles:[],bufferedRooms:[]},this._activeRooms=0,this._components=[this.roomUpdateRender,this.bedRoomsSelector]}async componentDidMount(){const e=await d.EntityFetcher.fetch(o.default.flatTypeFetcher,p.shared.entityID,p.shared.busyFunction);console.log("fetched:",e),e&&this.onFlatChanged(e)}render(){return this._components[this.state.stage]()}roomUpdateRender=()=>{const e=d.EntityFetcher.getValues(this.state.bedRooms,"id"),t=d.EntityFetcher.getValues(this.state.bedRooms,"name"),a=d.EntityFetcher.getValues(this.state.livingRooms,"id"),r=d.EntityFetcher.getValues(this.state.livingRooms,"name"),c=d.EntityFetcher.getValues(this.state.bathRooms,"id"),u=d.EntityFetcher.getValues(this.state.bathRooms,"name"),p=d.EntityFetcher.getValues(this.state.kitchens,"id"),m=d.EntityFetcher.getValues(this.state.kitchens,"name");return i.createElement("div",{className:"center form"},i.createElement(l.UpdateEntity,{title:n.default.text("flatType.update"),metaDataForFiles:this.state.metaDataForFiles,entityFetcher:o.default.flatTypeFetcher,entity:this.state.flatType,relations:[{fieldName:"bedRooms",ids:e},{fieldName:"livingRooms",ids:a},{fieldName:"bathRooms",ids:c},{fieldName:"kitchens",ids:p}],descriptor:s.flatTypeDescriptor},i.createElement("div",{className:"formDiv textAlignLeft"},i.createElement("div",null,n.default.text("flatType.bedRooms")),i.createElement("div",null,i.createElement("input",{className:"input center",type:"text",value:t.toString(),readOnly:!0,placeholder:n.default.text("common-choose-beds"),onClick:e=>this.onInputClick(e,0)}))),i.createElement("div",{className:"formDiv textAlignLeft"},i.createElement("div",null,n.default.text("flatType.livingRooms")),i.createElement("div",null,i.createElement("input",{className:"input center",type:"text",value:r.toString(),readOnly:!0,placeholder:n.default.text("common-choose-bed"),onClick:e=>this.onInputClick(e,1)}))),i.createElement("div",{className:"formDiv textAlignLeft"},i.createElement("div",null,n.default.text("flatType.bathRooms")),i.createElement("div",null,i.createElement("input",{className:"input center",type:"text",value:u.toString(),readOnly:!0,placeholder:n.default.text("common-choose-beds"),onClick:e=>this.onInputClick(e,2)}))),i.createElement("div",{className:"formDiv textAlignLeft"},i.createElement("div",null,n.default.text("flatType.kitchens")),i.createElement("div",null,i.createElement("input",{className:"input center",type:"text",value:m.toString(),readOnly:!0,placeholder:n.default.text("common-choose-beds"),onClick:e=>this.onInputClick(e,3)})))))};bedRoomsSelector=()=>i.createElement("div",{className:"center form"},i.createElement(r.ViewAllEntities,{title:n.default.text("flat-choose-bed-rooms"),columns:this.columns,entityFetcher:o.default.roomsFetcher,onSelectionChange:this.onSelectionChange}),i.createElement(c.RoundBtn,{disabled:0===this.state.bedRooms.length,text:n.default.text("common.ok"),onClick:()=>this.onChooseClicked(0)}),i.createElement(c.RoundBtn,{disabled:!1,text:n.default.text("common.back"),onClick:()=>this.onCancelClicked()}));onFlatChanged=(e,t)=>{let a=this.state.metaDataForFiles;t&&(a=t),this.setState({flatType:e,metaDataForFiles:a,bedRooms:e.bedRooms,bathRooms:e.bathRooms,kitchens:e.kitchens,livingRooms:e.livingRooms})};onSelectionChange=e=>{switch(this._activeRooms){case 0:this.setState({bedRooms:e});break;case 1:this.setState({livingRooms:e});break;case 2:this.setState({bathRooms:e});break;case 3:this.setState({kitchens:e})}};onInputClick=(e,t)=>{this._activeRooms=t;const a=[...this.getActiveRooms()];this.setState({bufferedRooms:a,stage:1})};getActiveRooms=()=>{switch(this._activeRooms){case 0:return this.state.bedRooms;case 1:return this.state.livingRooms;case 2:return this.state.bathRooms;case 3:return this.state.kitchens}};onChooseClicked=e=>{this.setState({stage:e})};onCancelClicked=()=>{this.onSelectionChange(this.state.bufferedRooms),this.setState({stage:0})}}var y=h;a.default=y},{react:"28kAn","../entityCRUD/updateEntity":"5MsdB","../../controller/lib/localization/localizer":"2Lq0B","../../controller/appController":"5m3ws","./metaData":"2dqYv","../entityCRUD/viewAllEntities":"7EVn1","../lib/roundButton":"29Imb","../../controller/network/entityFetcher":"1aKQt","../../model/flatType":"2W34w","../shared":"5kDOz"}],"2dqYv":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.flatTypeDescriptorCreate=a.flatTypeDescriptor=void 0;var i,l=e("../entityCRUD/types"),n=(i=e("../../controller/lib/localization/localizer"))&&i.__esModule?i:{default:i},o=e("../../controller/lib/validators");const s=[{name:"id",label:n.default.text("flatType.id"),type:l.FieldTypes.inputText,placeholder:n.default.text("flatType.id"),className:"input",readOnly:!0},{name:"name",label:n.default.text("flatType.name"),type:l.FieldTypes.inputText,placeholder:n.default.text("flatType.name"),className:"input",isValid:o.isStringValid},{name:"type",label:n.default.text("flatType.type"),type:l.FieldTypes.inputText,placeholder:n.default.text("flatType.type"),className:"input",isValid:o.isStringValid},{name:"price",label:n.default.text("flatType.price"),type:l.FieldTypes.inputDigit,placeholder:n.default.text("flatType.price"),className:"input",isValid:o.isDefined},{name:"count",label:n.default.text("flatType.count"),type:l.FieldTypes.inputDigit,placeholder:n.default.text("flatType.count"),className:"input",isValid:o.isDefined},{name:"area",label:n.default.text("flatType.area"),type:l.FieldTypes.inputDigit,placeholder:n.default.text("flatType.area"),className:"input",isValid:o.isDefined},{name:"description",label:n.default.text("flatType.description"),type:l.FieldTypes.inputText,placeholder:n.default.text("flatType.description"),className:"input",isValid:o.isStringValid},{name:"images",label:n.default.text("flatType.images"),type:l.FieldTypes.inputFile,isValid:o.isArrayValid}];a.flatTypeDescriptor=s;const r=s.slice(1);a.flatTypeDescriptorCreate=r},{"../entityCRUD/types":"4N9CI","../../controller/lib/localization/localizer":"2Lq0B","../../controller/lib/validators":"70nmJ"}],"2W34w":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getDefaultFlatType=void 0;a.getDefaultFlatType=()=>({createdAt:new Date,updatedAt:new Date,name:"",description:"",count:0,price:0,images:[],area:0,type:"",bedRooms:[],livingRooms:[],bathRooms:[],kitchens:[],flats:[]})},{}]},{},[]);