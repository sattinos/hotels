!function(e,t,n,r,a){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof o.parcelRequire&&o.parcelRequire,s="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(n,r){if(!t[n]){if(!e[n]){var a="function"==typeof parcelRequire&&parcelRequire;if(!r&&a)return a(n,!0);if(i)return i(n,!0);if(s&&"string"==typeof n)return s(n);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}c.resolve=function(t){return e[n][1][t]||t},c.cache={};var u=t[n]=new l.Module(n);e[n][0].call(u.exports,c,u,u.exports,this)}return t[n].exports;function c(e){return l(c.resolve(e))}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=e,l.cache=t,l.parent=i,l.register=function(t,n){e[t]=[function(e,t){t.exports=n},{}]},o.parcelRequire=l;for(var u=0;u<n.length;u++)l(n[u])}({"48akd":[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(e("react")),a=p(e("../../controller/lib/localization/localizer")),o=e("../../model/reservationEntity"),i=p(e("../../controller/appController")),s=e("../lib/roundButton"),l=e("../shared"),u=e("react-router"),c=e("../../paths"),d=p(e("./reservationViewer")),f=e("../storage");function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}class v extends r.Component{static getDefaultState=()=>({entity:(0,o.getDefaultReservation)(),saveEnabled:!1,toMainTapped:!1,desiredChunks:[]});constructor(e){super(e),this.state=v.getDefaultState()}async reset(){this.setState(v.getDefaultState())}render(){return this.state.toMainTapped?r.createElement(u.Redirect,{to:c.paths.vaReservation}):r.createElement("div",{className:"form center"},r.createElement(d.default,{title:a.default.text("reserve.create"),entity:this.state.entity,onNewEntityAvailable:this.onNewEntityAvailable}),r.createElement("div",null,r.createElement(s.RoundBtn,{text:a.default.text("common.save"),disabled:!this.state.saveEnabled,onClick:this.onSaveTapped}),r.createElement(s.RoundBtn,{text:a.default.text("common.back"),disabled:!1,onClick:()=>this.setState({toMainTapped:!0})})))}validate=()=>{const e=this.state.desiredChunks.length>0&&this.state.entity.channel.length>0;this.setState({saveEnabled:e})};onSaveTapped=async()=>{const e=f.storage.userProfile;if(console.log(e),e){l.shared.busyFunction(!0),console.log("onSaveTapped",this.state.entity),console.log("desiredChunks",this.state.desiredChunks);const t=await i.default.flatTypeFetcher.reserve(this.state.entity.from,this.state.entity.to,this.state.desiredChunks,e.id,this.state.entity.channel,!0);l.shared.busyFunction(!1),console.log("reservationEntity:",t),l.shared.alertFunction(a.default.text("reserve.success")),await this.reset()}};onNewEntityAvailable=async(e,t)=>{console.log("onNewEntityAvailable",e),this.setState({entity:e,desiredChunks:t},(()=>{this.validate()}))}}var y=v;n.default=y},{react:"28kAn","../../controller/lib/localization/localizer":"2Lq0B","../../model/reservationEntity":"7v774","../../controller/appController":"5m3ws","../lib/roundButton":"29Imb","../shared":"5kDOz","react-router":"14NBf","../../paths":"2jsBl","./reservationViewer":"1X2l2","../storage":"3K0zI"}]},{},[]);