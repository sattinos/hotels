!function(e,t,r,o,n){var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof s.parcelRequire&&s.parcelRequire,l="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function a(r,o){if(!t[r]){if(!e[r]){var n="function"==typeof parcelRequire&&parcelRequire;if(!o&&n)return n(r,!0);if(i)return i(r,!0);if(l&&"string"==typeof r)return l(r);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}c.resolve=function(t){return e[r][1][t]||t},c.cache={};var u=t[r]=new a.Module(r);e[r][0].call(u.exports,c,u,u.exports,this)}return t[r].exports;function c(e){return a(c.resolve(e))}}a.isParcelRequire=!0,a.Module=function(e){this.id=e,this.bundle=a,this.exports={}},a.modules=e,a.cache=t,a.parent=i,a.register=function(t,r){e[t]=[function(e,t){t.exports=r},{}]},s.parcelRequire=a;for(var u=0;u<r.length;u++)a(r[u])}({"2wt3N":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=v(e("react")),n=e("../../model/userProfile"),s=g(e("../../controller/appController")),i=e("../userProfileEditor"),l=v(e("../../controller/network/accountsFetcher")),a=g(e("../lib/digitsInput/input")),u=e("../lib/roundButton"),c=g(e("../../controller/lib/localization/localizer")),d=e("../shared"),f=e("react-router"),p=e("../../texts");e("../../common.less");var h=e("../../paths");function g(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}class b extends o.Component{_profile=new n.UserProfile;constructor(e){super(e),this.state={stage:0,otp:0,isRegistered:!1},this._components=[this.renderRegisterStage,this.renderVerifyStage]}renderRegisterStage=()=>{this._profile||(this._profile=new n.UserProfile);const e=this._profile;return o.createElement("div",{className:"center formBox"},o.createElement("div",{className:"center",id:"vendorLogo"}),o.createElement(i.UserProfileEditor,{saveTxt:c.default.text("register.save"),title:c.default.text("register.title"),cancelUrl:h.paths.signIn,profile:e,onOkTapped:this.onRegisterTapped}))};renderVerifyStage=()=>o.createElement("div",{className:"center paddedBox"},o.createElement("h1",null,c.default.text("register.verifyPhone")),o.createElement(a.default,{value:this.state.otp,className:"input",placeHolder:"",onChange:this.onOtpChange}),o.createElement(u.RoundBtn,{text:c.default.text("register.verify"),disabled:this.state.otp<999,onClick:this.onVerifyClicked}));render=()=>this.state.isRegistered?(console.log("redirecting to profile..."),o.createElement(f.Redirect,{to:"/"})):this._components[this.state.stage]();onRegisterTapped=async e=>{d.shared.busyFunction(!0);const t=await l.default.isFound(e);if(d.shared.busyFunction(!1),t!==l.UserResultCode.notFound)return void d.shared.alertFunction(p.userProfileMessages[t]);d.shared.busyFunction(!0);const r=await s.default.register(e);d.shared.busyFunction(!1),r&&(this._profile=r,this.setState({stage:1}))};onOtpChange=e=>{this.setState({otp:e})};onVerifyClicked=async()=>{d.shared.busyFunction(!0);const e=await l.default.verify(this._profile.phone,this.state.otp);d.shared.busyFunction(!1),e&&e.isSuccess?d.shared.alertFunction(p.userProfileMessages[l.UserResultCode.success],(()=>{this.setState({isRegistered:!0})})):d.shared.alertFunction(p.userProfileMessages[l.UserResultCode.unknown])}}r.default=b},{react:"28kAn","../../model/userProfile":"5iW9b","../../controller/appController":"5m3ws","../userProfileEditor":"4FDvA","../../controller/network/accountsFetcher":"620ua","../lib/digitsInput/input":"1JZbi","../lib/roundButton":"29Imb","../../controller/lib/localization/localizer":"2Lq0B","../shared":"5kDOz","react-router":"14NBf","../../texts":"1a9EL","../../common.less":"7GBTh","../../paths":"2jsBl"}],"5iW9b":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserProfile=void 0;r.UserProfile=class{id=0;fullName="";userName="";password="";phone="";isVerified=!1;token="";menus=[]}},{}],"1JZbi":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}r.default=e,t&&t.set(e,r);return r}(e("react"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}class s extends o.Component{constructor(e){super(e),this.state={s:""}}render(){return o.createElement("input",{className:this.props.className,id:this.props.id,type:"tel",pattern:"[0-9]*",value:this.props.value,placeholder:this.props.placeHolder,readOnly:this.props.readOnly||!1,onChange:this.onChangeHandler})}onChangeHandler=({target:e})=>{const t=e.value;if(""===t)return void this.props.onChange(t);let r=!1;for(let e=0;e<t.length;e++){const o=t[e];if(!(o<="9"&&o>="0")){if("."!==o||r)return;r=!0}}this.props.onChange(t)}}var i=s;r.default=i},{react:"28kAn"}],"1a9EL":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.userProfileMessages=void 0;var o,n=e("./controller/network/accountsFetcher"),s=(o=e("./controller/lib/localization/localizer"))&&o.__esModule?o:{default:o};const i={};r.userProfileMessages=i,i[n.UserResultCode.phoneUsed]=s.default.text("register.phoneUsed"),i[n.UserResultCode.userNameUsed]=s.default.text("register.userNameFound"),i[n.UserResultCode.success]=s.default.text("register.verify-success"),i[n.UserResultCode.unknown]=s.default.text("common.unknown-error")},{"./controller/network/accountsFetcher":"620ua","./controller/lib/localization/localizer":"2Lq0B"}],"7GBTh":[function(){},{}]},{},[]);